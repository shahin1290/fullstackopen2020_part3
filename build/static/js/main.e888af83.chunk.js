(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(3),a=n(15),o=n.n(a),s=n(4),r=n(5),u=n.n(r),b="/api/persons",f=function(){return u.a.get(b).then((function(e){return e.data}))},j=function(e){return u.a.post(b,e).then((function(e){return e.data}))},d=function(e){return u.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=function(e,t){return u.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},h=n(1),l=function(e){var t=e.persons,n=e.setPersons,i=e.newName,a=e.setNewName,o=e.newNumber,s=e.setNewNumber,r=e.notification,u=e.setNotification;return Object(c.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===i.trim()}))){var c=t.find((function(e){return e.name===i})),b=Object(h.a)(Object(h.a)({},c),{},{number:o});window.confirm("".concat(i.trim()," is already added to phonebook, replace the old number with a new one?"))&&m(c.id,b).then((function(e){n(t.map((function(t){return t.id!==c.id?t:e}))),a(""),s(""),u(Object(h.a)(Object(h.a)({},r),{},{message:"".concat(i," has been updated successfully"),type:"success"}))}))}else j({name:i.trim(),number:o}).then((function(e){n(t.concat(e)),a(""),s(""),u(Object(h.a)(Object(h.a)({},r),{},{message:"Added ".concat(i),type:"success"}))}))},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:i,onChange:function(e){a(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:function(e){s(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var t=e.searchText,n=e.setSearchText;return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},p=function(e){var t=e.persons,n=e.searchText,i=e.setPersons,a=e.notification,o=e.setNotification,s=t.filter((function(e){return e.name.toLowerCase().includes(n)}));return Object(c.jsx)("div",{children:s.map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return function(e){var n=e.id,c=e.name;window.confirm("Delete ".concat(c," ?"))&&d(e.id).then((function(){i(t.filter((function(e){return e.id!==n}))),o(Object(h.a)(Object(h.a)({},a),{},{message:"Information of ".concat(c," has been removed from server"),type:"success"}))})).catch((function(e){o(Object(h.a)(Object(h.a)({},a),{},{message:"Information of ".concat(c," has already been removed from server"),type:"danger"})),i(t.filter((function(e){return e.id!==n})))}))}(e)},children:"delete"})]},e.name)}))})},v=function(e){var t=e.notification,n=e.setNotification;return null===t.message?null:Object(c.jsxs)("div",{className:"notification ".concat(t.type),children:[t.message,void setTimeout((function(){n(Object(h.a)(Object(h.a)({},t),{},{message:null,type:""}))}),3e3)]})},x=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(""),r=Object(s.a)(o,2),u=r[0],b=r[1],j=Object(i.useState)(""),d=Object(s.a)(j,2),m=d[0],h=d[1],x=Object(i.useState)(""),N=Object(s.a)(x,2),w=N[0],g=N[1],y=Object(i.useState)({message:null,type:""}),S=Object(s.a)(y,2),k=S[0],T=S[1];return Object(i.useEffect)((function(){f().then((function(e){a(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{notification:k,setNotification:T}),Object(c.jsx)(O,{searchText:w,setSearchText:g}),Object(c.jsx)("h3",{children:"add a New"}),Object(c.jsx)(l,{persons:n,setPersons:a,newName:u,setNewName:b,newNumber:m,setNewNumber:h,notification:k,setNotification:T}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(p,{persons:n,searchText:w,setPersons:a,notification:k,setNotification:T})]})};n(38);o.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e888af83.chunk.js.map