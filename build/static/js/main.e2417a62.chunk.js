(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(3),o=n(15),i=n.n(o),r=n(4),s=n(5),u=n.n(s),b="/api/persons",j=function(){return u.a.get(b).then((function(e){return e.data}))},f=function(e){return u.a.post(b,e).then((function(e){return e.data}))},d=function(e){return u.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},m=function(e,t){return u.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))},h=n(1),O=function(e){var t=e.persons,n=e.setPersons,a=e.newName,o=e.setNewName,i=e.newNumber,r=e.setNewNumber,s=e.notification,u=e.setNotification;return Object(c.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===a.trim()}))){var c=t.find((function(e){return e.name===a})),b=Object(h.a)(Object(h.a)({},c),{},{number:i});window.confirm("".concat(a.trim()," is already added to phonebook, replace the old number with a new one?"))&&m(c.id,b).then((function(e){n(t.map((function(t){return t.id!==c.id?t:e}))),o(""),r(""),u(Object(h.a)(Object(h.a)({},s),{},{message:"".concat(a," has been updated successfully"),type:"success"}))})).catch((function(e){u(Object(h.a)(Object(h.a)({},s),{},{message:"".concat(e.response.data.error),type:"danger"}))}))}else f({name:a.trim(),number:i}).then((function(e){n(t.concat(e)),o(""),r(""),u(Object(h.a)(Object(h.a)({},s),{},{message:"Added ".concat(a),type:"success"}))})).catch((function(e){u(Object(h.a)(Object(h.a)({},s),{},{message:"".concat(e.response.data.error),type:"danger"}))}))},children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:a,onChange:function(e){o(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:i,onChange:function(e){r(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var t=e.searchText,n=e.setSearchText;return Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},p=function(e){var t=e.persons,n=e.searchText,a=e.setPersons,o=e.notification,i=e.setNotification,r=t.filter((function(e){return e.name.toLowerCase().includes(n)}));return Object(c.jsx)("div",{children:r.map((function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return function(e){var n=e.id,c=e.name;window.confirm("Delete ".concat(c," ?"))&&d(e.id).then((function(){a(t.filter((function(e){return e.id!==n}))),i(Object(h.a)(Object(h.a)({},o),{},{message:"Information of ".concat(c," has been removed from server"),type:"success"}))})).catch((function(e){i(Object(h.a)(Object(h.a)({},o),{},{message:"Information of ".concat(c," has already been removed from server"),type:"danger"})),a(t.filter((function(e){return e.id!==n})))}))}(e)},children:"delete"})]},e.name)}))})},v=function(e){var t=e.notification,n=e.setNotification;return null===t.message?null:Object(c.jsxs)("div",{className:"notification ".concat(t.type),children:[t.message,void setTimeout((function(){n(Object(h.a)(Object(h.a)({},t),{},{message:null,type:""}))}),3e3)]})},x=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(""),s=Object(r.a)(i,2),u=s[0],b=s[1],f=Object(a.useState)(""),d=Object(r.a)(f,2),m=d[0],h=d[1],x=Object(a.useState)(""),g=Object(r.a)(x,2),N=g[0],w=g[1],y=Object(a.useState)({message:null,type:""}),S=Object(r.a)(y,2),k=S[0],T=S[1];return Object(a.useEffect)((function(){j().then((function(e){o(e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(v,{notification:k,setNotification:T}),Object(c.jsx)(l,{searchText:N,setSearchText:w}),Object(c.jsx)("h3",{children:"add a New"}),Object(c.jsx)(O,{persons:n,setPersons:o,newName:u,setNewName:b,newNumber:m,setNewNumber:h,notification:k,setNotification:T}),Object(c.jsx)("h3",{children:"Numbers"}),Object(c.jsx)(p,{persons:n,searchText:N,setPersons:o,notification:k,setNotification:T})]})};n(38);i.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e2417a62.chunk.js.map